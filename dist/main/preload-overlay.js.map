{"version":3,"file":"preload-overlay.js","mappings":"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","sources":["webpack://language-agent/./src/shared/types.ts","webpack://language-agent/external node-commonjs \"electron\"","webpack://language-agent/webpack/bootstrap","webpack://language-agent/./src/main/preload-overlay.ts"],"sourcesContent":["// Shared type definitions for the Language Agent application\n\nexport type TranscriptionState = 'idle' | 'starting' | 'active' | 'stopping';\n\nexport type WhisperModel = 'tiny' | 'base' | 'small';\n\nexport type SupportedLanguage =\n  | 'ja' // Japanese\n  | 'ko' // Korean\n  | 'zh' // Chinese (Mandarin)\n  | 'es' // Spanish\n  | 'fr' // French\n  | 'de' // German\n  | 'en' // English\n  | 'auto'; // Auto-detect\n\nexport type TranscriptionProvider = 'deepgram' | 'gladia';\n\nexport interface TranscriptionResult {\n  text: string;\n  timestamp: number;\n  confidence: number;\n  language?: string;\n  isFinal?: boolean;      // Whether this is the final transcription for this segment\n  speechFinal?: boolean;  // Whether the speaker has finished this utterance\n}\n\nexport interface SavedTranscript {\n  id: string;\n  title: string;\n  content: string;\n  language: SupportedLanguage;\n  startTime: number;      // Unix timestamp when session started\n  endTime: number;        // Unix timestamp when session ended\n  duration: number;       // Duration in seconds\n  wordCount: number;\n  createdAt: number;      // Unix timestamp\n}\n\nexport interface OverlayPosition {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport interface OverlayStyle {\n  position: 'bottom' | 'top' | 'custom';\n  customPosition?: { x: number; y: number };\n  fontFamily: string;\n  fontSize: number;\n  fontWeight: number;\n  textColor: string;\n  backgroundColor: string;\n  backgroundOpacity: number;\n  textShadow: boolean;\n  textOutline: boolean;\n  maxLines: number;\n  displayDuration: number; // in seconds\n}\n\nexport interface AppSettings {\n  // Provider selection\n  transcriptionProvider: TranscriptionProvider;\n\n  // API settings\n  deepgramApiKey: string;\n  gladiaApiKey: string;\n\n  // Model settings\n  whisperModel: WhisperModel;\n  language: SupportedLanguage;\n\n  // Performance settings\n  gpuAcceleration: boolean;\n  chunkSize: number; // in seconds (1-3)\n\n  // Overlay settings\n  overlayStyle: OverlayStyle;\n\n  // Shortcuts\n  toggleShortcut: string;\n  showHideShortcut: string;\n\n  // General\n  autoStart: boolean;\n  minimizeToTray: boolean;\n}\n\nexport const DEFAULT_OVERLAY_STYLE: OverlayStyle = {\n  position: 'bottom',\n  fontFamily: 'system-ui, \"Noto Sans CJK\", sans-serif',\n  fontSize: 24,\n  fontWeight: 400,\n  textColor: '#FFFFFF',\n  backgroundColor: '#000000',\n  backgroundOpacity: 0.7,\n  textShadow: true,\n  textOutline: false,\n  maxLines: 2,\n  displayDuration: 5,\n};\n\nexport const DEFAULT_SETTINGS: AppSettings = {\n  transcriptionProvider: 'deepgram',\n  deepgramApiKey: '',\n  gladiaApiKey: '',\n  whisperModel: 'base',\n  language: 'auto',\n  gpuAcceleration: true,\n  chunkSize: 2,\n  overlayStyle: DEFAULT_OVERLAY_STYLE,\n  toggleShortcut: 'CommandOrControl+Shift+S',\n  showHideShortcut: 'CommandOrControl+Shift+H',\n  autoStart: false,\n  minimizeToTray: true,\n};\n\nexport const LANGUAGE_NAMES: Record<SupportedLanguage, string> = {\n  ja: 'Japanese',\n  ko: 'Korean',\n  zh: 'Chinese (Mandarin)',\n  es: 'Spanish',\n  fr: 'French',\n  de: 'German',\n  en: 'English',\n  auto: 'Auto-detect',\n};\n\nexport const PROVIDER_NAMES: Record<TranscriptionProvider, string> = {\n  deepgram: 'Deepgram',\n  gladia: 'Gladia',\n};\n\nexport const MODEL_INFO: Record<WhisperModel, { size: string; speed: string; accuracy: string }> = {\n  tiny: { size: '~75MB', speed: 'Fastest', accuracy: 'Good' },\n  base: { size: '~150MB', speed: 'Fast', accuracy: 'Better' },\n  small: { size: '~500MB', speed: 'Moderate', accuracy: 'Best' },\n};\n\n// IPC Channel names\nexport const IPC_CHANNELS = {\n  // Control -> Main\n  START_TRANSCRIPTION: 'start-transcription',\n  STOP_TRANSCRIPTION: 'stop-transcription',\n  GET_SETTINGS: 'get-settings',\n  UPDATE_SETTINGS: 'update-settings',\n  GET_STATE: 'get-state',\n  TRANSCRIBE_AUDIO: 'transcribe-audio',\n  GET_DESKTOP_SOURCES: 'get-desktop-sources',\n\n  // Audio capture\n  START_SYSTEM_AUDIO: 'start-system-audio',\n  STOP_SYSTEM_AUDIO: 'stop-system-audio',\n  SYSTEM_AUDIO_DATA: 'system-audio-data',\n  STREAM_AUDIO_CHUNK: 'stream-audio-chunk', // New: stream audio directly to Deepgram\n\n  // Main -> Overlay\n  TRANSCRIPTION_UPDATE: 'transcription-update',\n  CLEAR_TRANSCRIPTION: 'clear-transcription',\n  UPDATE_OVERLAY_STYLE: 'update-overlay-style',\n\n  // Main -> Control\n  STATE_CHANGED: 'state-changed',\n  ERROR_OCCURRED: 'error-occurred',\n\n  // Diagnostics\n  GET_DIAGNOSTICS: 'get-diagnostics',\n\n  // Transcript history\n  GET_TRANSCRIPTS: 'get-transcripts',\n  GET_TRANSCRIPT: 'get-transcript',\n  DELETE_TRANSCRIPT: 'delete-transcript',\n  EXPORT_TRANSCRIPT: 'export-transcript',\n} as const;\n","module.exports = require(\"electron\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Check if module exists (development only)\n\tif (__webpack_modules__[moduleId] === undefined) {\n\t\tvar e = new Error(\"Cannot find module '\" + moduleId + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Preload script for Overlay window\n *\n * Exposes a minimal API for receiving transcription updates\n * and style changes from the main process.\n */\n\nimport { contextBridge, ipcRenderer } from 'electron';\nimport { TranscriptionResult, OverlayStyle, IPC_CHANNELS } from '../shared/types';\n\n// Define the API exposed to the overlay renderer\nexport interface OverlayAPI {\n  // Event listeners\n  onTranscriptionUpdate: (callback: (result: TranscriptionResult) => void) => void;\n  onClearTranscription: (callback: () => void) => void;\n  onStyleUpdate: (callback: (style: OverlayStyle) => void) => void;\n\n  // Cleanup\n  removeAllListeners: () => void;\n}\n\n// Expose protected methods to the renderer process\ncontextBridge.exposeInMainWorld('electronAPI', {\n  // Event listeners\n  onTranscriptionUpdate: (callback: (result: TranscriptionResult) => void) => {\n    ipcRenderer.on(IPC_CHANNELS.TRANSCRIPTION_UPDATE, (_event, result) => callback(result));\n  },\n\n  onClearTranscription: (callback: () => void) => {\n    ipcRenderer.on(IPC_CHANNELS.CLEAR_TRANSCRIPTION, () => callback());\n  },\n\n  onStyleUpdate: (callback: (style: OverlayStyle) => void) => {\n    ipcRenderer.on(IPC_CHANNELS.UPDATE_OVERLAY_STYLE, (_event, style) => callback(style));\n  },\n\n  // Cleanup\n  removeAllListeners: () => {\n    ipcRenderer.removeAllListeners(IPC_CHANNELS.TRANSCRIPTION_UPDATE);\n    ipcRenderer.removeAllListeners(IPC_CHANNELS.CLEAR_TRANSCRIPTION);\n    ipcRenderer.removeAllListeners(IPC_CHANNELS.UPDATE_OVERLAY_STYLE);\n  },\n} as OverlayAPI);\n"],"names":[],"sourceRoot":""}